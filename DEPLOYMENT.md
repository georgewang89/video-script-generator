# Deployment to Vercel

## ğŸš€ Quick Deploy

### Prerequisites
- Vercel account (free tier available)
- GitHub repository with your code
- Environment variables configured

### One-Click Deploy

1. **Install Vercel CLI:**
   ```bash
   npm install -g vercel
   ```

2. **Deploy to Vercel:**
   ```bash
   npm run deploy
   ```

3. **Follow the prompts:**
   - Link to existing project or create new
   - Set up environment variables
   - Deploy!

## ğŸ”§ Manual Setup

### Step 1: Create Vercel Project

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Click "New Project"
3. Import your GitHub repository
4. Configure build settings:
   - Framework Preset: Other
   - Root Directory: `./`
   - Build Command: `npm run vercel-build`
   - Output Directory: `frontend/build`

### Step 2: Configure Environment Variables

In your Vercel project settings, add these environment variables:

```env
# Required
CLAUDE_API_KEY=your_claude_api_key_here
FAL_API_KEY=928f660d-bb6d-488b-80dc-692e4b7172fa:d501ee801b4e8aaf613dc13ea440a4de

# Optional
NODE_ENV=production
```

### Step 3: Deploy

```bash
vercel --prod
```

## ğŸ“ Project Structure for Vercel

```
video-script-generator/
â”œâ”€â”€ frontend/                 # React app (static build)
â”‚   â”œâ”€â”€ build/               # Generated by npm run build
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                 # Node.js API (serverless functions)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ index.ts        # Main API handler
â”‚   â””â”€â”€ vercel.json         # Backend-specific config
â”œâ”€â”€ vercel.json             # Main Vercel configuration
â””â”€â”€ package.json            # Root build scripts
```

## ğŸ”„ Deployment Flow

1. **Frontend**: Built as static files â†’ Served by Vercel's CDN
2. **Backend**: Compiled to serverless functions â†’ Auto-scaling API
3. **Routing**: API calls go to `/api/*` â†’ Backend functions
4. **Static**: All other routes â†’ Frontend build

## ğŸŒ Environment Configuration

### Development
```env
REACT_APP_API_URL=http://localhost:3001
```

### Production (Vercel)
```env
REACT_APP_API_URL=/api
```

## ğŸ“Š Monitoring & Logs

### View Deployment Logs
```bash
vercel logs <deployment-url>
```

### View Function Logs
```bash
vercel logs --follow
```

### Performance Monitoring
- Vercel Analytics (built-in)
- Web Vitals tracking
- Function performance metrics

## ğŸš€ Advanced Configuration

### Custom Domains
1. Go to project settings in Vercel
2. Add your custom domain
3. Configure DNS records
4. SSL automatically handled

### Build Optimization
```json
{
  "functions": {
    "backend/src/index.ts": {
      "maxDuration": 30,
      "memory": 1024
    }
  }
}
```

### Caching Strategy
- Static assets: 1 year cache
- API responses: No cache (dynamic)
- Build artifacts: Cached between deployments

## ğŸ”’ Security Best Practices

1. **Environment Variables**: Never commit API keys
2. **CORS**: Configured for production domain
3. **Rate Limiting**: Implement in API routes
4. **Input Validation**: Sanitize all inputs

## ğŸ› Troubleshooting

### Common Issues

1. **Build Failures**
   ```bash
   # Check build logs
   vercel logs --follow
   
   # Test build locally
   npm run build
   ```

2. **API Timeouts**
   - Increase maxDuration in vercel.json
   - Optimize API functions
   - Use streaming for long operations

3. **Environment Variables**
   - Check Vercel dashboard settings
   - Redeploy after changes
   - Verify variable names

4. **File Upload Issues**
   - Vercel has 4.5MB limit for serverless functions
   - Use external storage for large files
   - Implement chunked uploads

### Debug Commands

```bash
# Check deployment status
vercel list

# Get deployment info
vercel inspect <deployment-url>

# Download deployment logs
vercel logs <deployment-url> --output logs.txt
```

## ğŸ¯ Performance Tips

1. **Bundle Size**: Optimize frontend build
2. **Cold Starts**: Keep functions warm with minimal requests
3. **CDN**: Leverage Vercel's global CDN
4. **Caching**: Use appropriate cache headers

## ğŸ“ˆ Scaling Considerations

- **Hobby Plan**: 100GB bandwidth/month
- **Pro Plan**: 1TB bandwidth/month
- **Function Limits**: 10-second execution time
- **Memory**: Up to 3GB per function

## ğŸ”„ CI/CD Integration

### GitHub Integration
1. Connect repository to Vercel
2. Auto-deploy on push to main
3. Preview deployments for PRs
4. Environment-specific builds

### Custom Workflow
```yaml
# .github/workflows/deploy.yml
name: Deploy to Vercel
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

## ğŸ‰ Post-Deployment

After successful deployment:

1. **Test all functionality**
2. **Monitor performance**
3. **Set up analytics**
4. **Configure custom domain**
5. **Enable preview deployments**

Your video script generator is now live on Vercel! ğŸš€